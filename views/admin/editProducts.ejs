
    

    <!DOCTYPE html>
    <html lang="en-US" dir="ltr">
    
    <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
    
      <!-- ===============================================-->
      <!--    Document Title-->
      <!-- ===============================================-->
      <title>OnlineKart</title>
    
      <!-- ===============================================-->
      <!--    Favicons-->
      <!-- ===============================================-->
      <link rel="apple-touch-icon" sizes="180x180" href="../../../assets/img/favicons/apple-touch-icon.png">
      <link rel="icon" type="image/png" sizes="32x32" href="../../../assets/img/favicons/favicon-32x32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="../../../assets/img/favicons/favicon-16x16.png">
      <link rel="shortcut icon" type="image/x-icon" href="../../../assets/img/favicons/favicon.ico">
      <link rel="manifest" href="../../../assets/img/favicons/manifest.json">
      <meta name="msapplication-TileImage" content="../../../assets/img/favicons/mstile-150x150.png">
      <meta name="theme-color" content="#ffffff">
      <script src="../../../vendors/imagesloaded/imagesloaded.pkgd.min.js"></script>
      <script src="../../../vendors/simplebar/simplebar.min.js"></script>
      <script src="../../../assets/js/config.js"></script>
    
      <!-- ===============================================-->
      <!--    Stylesheets-->
      <!-- ===============================================-->
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
      <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&amp;display=swap"
        rel="stylesheet">
      <link href="../../../vendors/simplebar/simplebar.min.css" rel="stylesheet">
      <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
      <link href="../../../assets/css/theme-rtl.min.css" type="text/css" rel="stylesheet" id="style-rtl">
      <link href="../../../assets/css/theme.min.css" type="text/css" rel="stylesheet" id="style-default">
      <link href="../../../assets/css/user-rtl.min.css" type="text/css" rel="stylesheet" id="user-style-rtl">
      <link href="../../../assets/css/user.min.css" type="text/css" rel="stylesheet" id="user-style-default">
      <script>
        var phoenixIsRTL = window.config.config.phoenixIsRTL;
        if (phoenixIsRTL) {
          var linkDefault = document.getElementById('style-default');
          var userLinkDefault = document.getElementById('user-style-default');
          linkDefault.setAttribute('disabled', true);
          userLinkDefault.setAttribute('disabled', true);
          document.querySelector('html').setAttribute('dir', 'rtl');
        } else {
          var linkRTL = document.getElementById('style-rtl');
          var userLinkRTL = document.getElementById('user-style-rtl');
          linkRTL.setAttribute('disabled', true);
          userLinkRTL.setAttribute('disabled', true);
        }
      </script>
    </head>
    
    <body>
      <!-- ===============================================-->
      <!--    Main Content-->
      <!-- ===============================================-->
    
     
    
      <main class="main" id="top">
        <div class="container">
          <div class="row flex-center min-vh-100 py-5">
            <div class="col-sm-10 col-md-8 col-lg-5 col-xl-5 col-xxl-3">
              <div class="text-center mb-7">
               
                <form action="/admin/edit-product?id=<%-products._id%>" method="post"
                  enctype="multipart/form-data">
                
                    <h4 class="mtext-105 cl2 txt-center p-b-30">
                        Edit Product
                    </h4>
                    <h4 style="color: red;" class="text-center"><%-message%></h4>
                    <br>
                
                
                
                
                    <div class="mb-3 text-start">
                        <label class="form-label">Product Name </label>
                        <input id="product_name" name="pName" placeholder="Name" class="form-control input-md highlight" required=""
            type="text" value="<%=products.name%>" required />

                
                    </div>
    
    
                    <div class="mb-3 text-start">
                        <label class="form-label">Description </label>
                        <input id="product_name" name="pDescription" placeholder="Enter Description"
            class="form-control input-md highlight" required="" type="text" value="<%=products.description%>"
            required />
                    </div>
    
    
                    <div class="row">
                        <div class="col-sm-6">
    
                            <div class="mb-3 text-start">
                                <label class="form-label">Category </label>
                                <select class="form-select border-white" id="exampleFormControlSelect1" aria-label="Default select example"
            aria-placeholder="" name="pCategory">
            <option disabled selected>select any category</option>
            <% if(category){ %>
              <% for(let i=1;i <=category.length; i++){ %>
                <option value="<%= category[i-1].name %>">
                  <%= category[i-1].name %>
                </option>
                <% } %>
                  <% }else{ %>
                    <h1>No Categories to add</h1>
                    <% } %>
          </select>
                            </div>
                           
    
                        </div>
    
    
                        
                            <div class="col-sm-6">
    
                                <div class="mb-3 text-start">
                                    <label class="form-label">Total Stock </label>
                                    <input id="product_name" name="pStock" placeholder="Stock" class="form-control input-md highlight" required=""
            type="number" value="<%=products.stock%>" required />

                            
                                </div>
    
                            </div>
                    </div>
                
                
                    
                
                
                   
                
                
                  
                
                
                    <div class="row">
                        <div class="col-sm-6">
                
                            <div class="mb-3 text-start">
                                <label class="form-label">Price </label>
                                <input id="product_name" name="pPrice" placeholder="Enter the Price" class="form-control input-md highlight"
                                required="" type="number" value="<%=products.price%>" required />
                            </div>
                
                
                        </div>
                
                
                
                        <div class="col-sm-6">
                
                
                            <div class="mb-3 text-start">
                                <label class="form-label">Product Rating</label>
                
                                <input id="product_name" name="pRating" placeholder="Mark your rating" class="form-control input-md highlight"
                                required="" type="number" value="<%=products.rating%>" max="5" required />
                    
                            </div>
                        </div>
                    </div>
                
                
                
                
                
                
                
                
                
                    <div class="mb-3 text-start">
                        <label class="form-label" for="filebutton">Images </label>
                        <br>
                        <div class="d-flex mb-2 mt-2">
                          <% for(let key of products.image){ %>
                            <div id='<%=key %>' style="padding-right: 4px; ">
                              <div class="d-flex align-items-center justify-content-center position-relative "
                                style="border: 1px solid rgb(236, 236, 236);border-radius: 8px;height: 85px;width: 78px;">
                                <button style="color: aliceblue;" type="button" onclick="cut('<%=key%>')"
                                  class="close position-absolute z-3 top-0 end-0 bg-transparent shadow-none " aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                                <img src="/uploads/<%=key %>" class="img-thumbnail rounded" width="60px" height="60px"
                                  style="border: 4px;" alt="error">
                              </div>
                            </div>
                            <%}%>
                        </div>
                        <input id="filebutton" name="pImage" class="input-file" type="file" id="image" multiple accept="image/*" />
                    </div>
                
                
  
                
                    <div class="d-flex justify-content-center mx-4 mb-5 mb-lg-4">
                      <input type="hidden" value="<%=products._id%>" id="pId" />
                
                        <a style="margin-left: 40%;"><button type="submit" value="register" class="btn btn-primary">Save</button></a>
                
                        &ensp;
                        <a style="margin-right: 40%;" href="/admin/product"><button type="button"
                                class="btn btn-primary">cancel</button></a>
                
                    </div>
                </form>
    
              </div>
            </div>
          </div>
    
    
      </main>
    
    
    
      <script src="../../../vendors/popper/popper.min.js"></script>
      <script src="../../../vendors/bootstrap/bootstrap.min.js"></script>
      <script src="../../../vendors/anchorjs/anchor.min.js"></script>
      <script src="../../../vendors/is/is.min.js"></script>
      <script src="../../../vendors/fontawesome/all.min.js"></script>
      <script src="../../../vendors/lodash/lodash.min.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
      <script src="../../../vendors/list.js/list.min.js"></script>
      <script src="../../../vendors/feather-icons/feather.min.js"></script>
      <script src="../../../vendors/dayjs/dayjs.min.js"></script>
      <script src="../../../assets/js/phoenix.js"></script>
    </body>
    
    </html>
    
    
    
    
    
    
    
    




















    

   
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>

      function cut(id) {
        const swalWithBootstrapButtons = Swal.mixin({
          customClass: {
            confirmButton: 'btn btn-success',
            cancelButton: 'btn btn-danger'
          },
          buttonsStyling: false
        })

        swalWithBootstrapButtons.fire({
          title: 'Are you sure?',
          text: "You won't be able to revert this!",
          icon: 'warning',
          showCancelButton: true,
          confirmButtonText: 'Yes, delete it!',
          cancelButtonText: 'No, cancel!',
          reverseButtons: true
        }).then((result) => {
          if (result.isConfirmed) {
            pId = document.getElementById('pId').value
            document.getElementById(id).innerHTML = ''
            const data = { img: id, pId: pId }
            console.log(id, pId);
            axios.post('/admin/updateImage', data)
              .then(res => {
                if (res.data) {
                  console.log(res.data);

                }
              })
              .catch(error => {
                console.log(error);
              })
            console.log('This was logged in the callback: ' + result);
            swalWithBootstrapButtons.fire(
              'Deleted!',
              'Your file has been deleted.',
              'success'
            )
          } else if (
            /* Read more about handling dismissals below */
            result.dismiss === Swal.DismissReason.cancel
          ) {
            swalWithBootstrapButtons.fire(
              'Cancelled',
              'Your file is not deleted :)',
              'error'
            )
          }
        })
      }

    </script>
 