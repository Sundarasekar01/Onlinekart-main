<%- include ('../partials/adminHeader.ejs') %>

<div class="container">

    <div class="row g-2 mb-4">
        <div class="col-auto">
          <h2 class="mb-0">Products</h2>
        </div>
      </div>
        <a href="/admin/add-product"><button type="button" class="btn btn-primary mx-3">+ Add Product</button></a>
        
        <br><br>
        <div class="table-responsive">
        <table class="table text-center">
            <thead>
                <tr>
                    <th scope="col">SL NO</th>
                    <th scope="col">NAME</th>
                    <th scope="col">STOCK</th>
                    <th scope="col">CATEGORY</th>
                    <th scope="col">PRICE</th>
                    <th scope="col">RATING</th>
                    <th scope="col">IMAGE</th>
                    <th scope="col">ACTION</th>


                </tr>
            </thead>
            <tbody>
                <% if(products.length> 0){ %>
                    <% for(let i=1;i <=products.length; i++){ %>
                        <% if(products.length>=0){ %>
                            <tr>
                                <th>
                                    <%= i %>
                                </th>
                                <td>
                                    <%= products[i-1].name %>
                                </td>
                                <td>
                                    <%= products[i-1].stock %>
                                </td>
                                <td>
                                    <%= products[i-1].category %>
                                </td>

                                <td>
                                    <%= products[i-1].price %>
                                </td>
                                <td>
                                    <%= products[i-1].rating %>
                                </td>

                                <td>
                                    <% if(products[i-1].image) { %>
                                        <img src="/uploads/<%= products[i-1].image[0] %>" width="100vw" height="100vh">
                                        <% }else{ %>
                                            Image Not Found
                                            <% } %>
                                </td>
                                <td>
                                    <a class="text-success" href="/admin/edit-product?id=<%= products[i-1]._id %>">
                                        <button class="btn btn-secondary">Edit</button>
                                           </a><br>
                                           <br>

                                    <a onclick="return confirm('do you want to delete?')" 
                                        href="/admin/delete-product?id=<%= products[i-1]._id %>">
                                    <button class="btn btn-danger">Delete</button></a><br>

<br>
                                    <a id="<%-products[i-1]._id %>" 
                                        href="/admin/show-product?id=<%-products[i-1]._id %>">
                                        <button class="btn btn-primary"><% if(products[i-1].isAvailable){ %>Unlist<%}else{%>list<%}%></button>
                                    </a>
                                </td>

                            </tr>
                            <% } %>
                                <% } } else{ %>
                                    <tr>
                                        <td colspan="5">Products Not Found</td>
                                    </tr>
                                    <% } %>

            </tbody>
        </table>
        </div>


</div>
        <%- include ('../partials/adminFooter.ejs') %>